// schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
}

model User {
  id       Int      @id @default(autoincrement())
  username String   @unique
  password String
  email    String   @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("users")
}

model Edificio {
  id            Int      @id @default(autoincrement())
  nombre        String
  direccion     String
  codigoPostal  String
  ciudad        String
  provincia     String

  instalaciones Instalacion[]
}

model Instalacion {
  id                    Int      @id @default(autoincrement())
  nombre                String
  tipoInstalacion       String
  edificio              Edificio  @relation(fields: [edificioId], references: [id])
  edificioId            Int
  cliente               String

  dispositivos Dispositivo[]
}

model Dispositivo {
  id            Int      @id @default(autoincrement())
  nombre        String
  descripcion   String
  codigoQR      String   @unique
  instalacion   Instalacion  @relation(fields: [instalacionId], references: [id])
  instalacionId Int
}
